{
    "type": "Microsoft.Insights/dataCollectionRules",
    "apiVersion": "2023-03-11",
    "name": "{{dataCollectionRules_AA_Sample2_DCR_name}}",
    "location": "{{location}}",
    "properties": {
        "dataCollectionEndpointId": "{{dataCollectionEndpoints_AA_Sample_DCE_externalid}}",
        "streamDeclarations": {
            "Custom-AA_Sample2_IngestFuncTable_CL": {
                "columns": [
                    {
                        "name": "Time",
                        "type": "datetime"
                    },
                    {
                        "name": "Computer",
                        "type": "string"
                    },
                    {
                        "name": "AdditionalContext",
                        "type": "dynamic"
                    }
                ]
            }
        },
        "dataSources": {},
        "destinations": {
            "logAnalytics": [
                {
                    "workspaceResourceId": "{{workspaces_aa_sample_loganalytics_externalid}}",
                    "name": "clv2ws1"
                }
            ]
        },
        "dataFlows": [
            {
                "streams": [
                    "Custom-AA_Sample2_IngestFuncTable_CL"
                ],
                "destinations": [
                    "clv2ws1"
                ],
                "transformKql": "source | extend TimeGenerated = now(), Time = todatetime(Time), Computer = tostring(AdditionalContext.Computer), AdditionalContext = todynamic(AdditionalContext)\n",
                "outputStream": "Custom-AA_Sample2_IngestFuncTable_CL"
            }
        ]
    }
}
